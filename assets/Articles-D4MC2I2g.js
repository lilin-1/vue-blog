import{d as z,c as f,k as i,j as e,t as _,m as x,q as p,f as I,y as g,F as C,s as A,i as l,J as N,w as D,o as Q,x as T,l as F,v as U,K as R,A as b,g as j,u as q}from"./vendor-BA1WIY61.js";import{u as E,_ as J}from"./index-DTOcjxgb.js";import{A as K}from"./ArticleCard-CvLo9ufD.js";import"./ui-9MHhjKhu.js";import"./avatar-CqVDRiVN.js";const L={class:"flex items-center justify-between","aria-label":"分页导航"},G={class:"flex flex-1 justify-between sm:hidden"},H=["disabled"],O=["disabled"],W={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},X={class:"text-sm text-gray-700 dark:text-gray-300"},Y={class:"font-medium"},Z={class:"font-medium"},ee={class:"font-medium"},te={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"分页"},re=["disabled"],ae={key:0,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300"},se=["onClick"],oe=["disabled"],ne=z({__name:"Pagination",props:{currentPage:{},totalPages:{},totalItems:{default:0},pageSize:{default:10}},emits:["pageChange"],setup(S,{emit:c}){const u=S,a=c,$=f(()=>(u.currentPage-1)*u.pageSize+1),k=f(()=>Math.min(u.currentPage*u.pageSize,u.totalItems)),h=f(()=>{const t=[],{currentPage:r,totalPages:d}=u;if(d<=7){for(let v=1;v<=d;v++)t.push(v);return t}t.push(1);let y=Math.max(2,r-1),w=Math.min(d-1,r+1);r<=3&&(w=Math.min(d-1,5)),r>=d-2&&(y=Math.max(2,d-4)),y>2&&t.push("...");for(let v=y;v<=w;v++)t.push(v);return w<d-1&&t.push("..."),d>1&&t.push(d),t}),m=t=>{t>=1&&t<=u.totalPages&&t!==u.currentPage&&a("pageChange",t)};return(t,r)=>{const d=I("font-awesome-icon");return l(),i("nav",L,[e("div",G,[e("button",{disabled:t.currentPage<=1,onClick:r[0]||(r[0]=y=>m(t.currentPage-1)),class:_(["relative inline-flex items-center px-4 py-2 text-sm font-medium rounded-md",t.currentPage<=1?"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-700 dark:text-gray-500":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"])},[x(d,{icon:"arrow-left",class:"mr-2"}),r[4]||(r[4]=p(" 上一页 ",-1))],10,H),e("button",{disabled:t.currentPage>=t.totalPages,onClick:r[1]||(r[1]=y=>m(t.currentPage+1)),class:_(["relative ml-3 inline-flex items-center px-4 py-2 text-sm font-medium rounded-md",t.currentPage>=t.totalPages?"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-700 dark:text-gray-500":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"])},[r[5]||(r[5]=p(" 下一页 ",-1)),x(d,{icon:"arrow-right",class:"ml-2"})],10,O)]),e("div",W,[e("div",null,[e("p",X,[r[6]||(r[6]=p(" 显示第 ",-1)),e("span",Y,g($.value),1),r[7]||(r[7]=p(" 到 ",-1)),e("span",Z,g(k.value),1),r[8]||(r[8]=p(" 项，共 ",-1)),e("span",ee,g(t.totalItems),1),r[9]||(r[9]=p(" 项 ",-1))])]),e("div",null,[e("nav",te,[e("button",{disabled:t.currentPage<=1,onClick:r[2]||(r[2]=y=>m(t.currentPage-1)),class:_(["relative inline-flex items-center px-2 py-2 rounded-l-md border text-sm font-medium",t.currentPage<=1?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed dark:bg-gray-700 dark:border-gray-600 dark:text-gray-500":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700"])},[r[10]||(r[10]=e("span",{class:"sr-only"},"上一页",-1)),x(d,{icon:"arrow-left",class:"h-4 w-4"})],10,re),(l(!0),i(C,null,A(h.value,y=>(l(),i(C,{key:y},[y==="..."?(l(),i("span",ae," ... ")):(l(),i("button",{key:1,onClick:w=>m(y),class:_(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",y===t.currentPage?"z-10 bg-primary-50 border-primary-500 text-primary-600 dark:bg-primary-900/20 dark:border-primary-400 dark:text-primary-400":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700"])},g(y),11,se))],64))),128)),e("button",{disabled:t.currentPage>=t.totalPages,onClick:r[3]||(r[3]=y=>m(t.currentPage+1)),class:_(["relative inline-flex items-center px-2 py-2 rounded-r-md border text-sm font-medium",t.currentPage>=t.totalPages?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed dark:bg-gray-700 dark:border-gray-600 dark:text-gray-500":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700"])},[r[11]||(r[11]=e("span",{class:"sr-only"},"下一页",-1)),x(d,{icon:"arrow-right",class:"h-4 w-4"})],10,oe)])])])])}}}),le={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},ie={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},de={class:"container-custom py-12"},ge={class:"text-center"},ce={class:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4"},ye={class:"text-lg text-gray-600 dark:text-gray-400"},ue={class:"container-custom py-8"},me={class:"flex flex-col lg:flex-row gap-8"},pe={class:"flex-1"},be={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8"},xe={class:"flex flex-col md:flex-row gap-4"},ke={class:"flex-1"},ve={class:"relative"},fe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},he={class:"md:w-48"},_e=["value"],we={key:0,class:"mt-4 flex items-center"},Pe={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 dark:bg-primary-900/20 text-primary-800 dark:text-primary-200"},Ce={key:0},$e={class:"mb-6"},Te={class:"text-gray-600 dark:text-gray-400"},Ae={class:"font-semibold text-gray-900 dark:text-white"},Me={key:0,class:"text-sm"},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12"},Fe={key:1,class:"text-center py-16"},je={class:"max-w-md mx-auto"},ze={class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},Ie={class:"text-gray-600 dark:text-gray-400 mb-6"},Ve={class:"lg:w-80"},Be={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6"},Ne={class:"space-y-2"},De={class:"flex items-center justify-between"},Qe={class:"text-sm bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"},Ue=["onClick"],Re={class:"flex items-center justify-between"},qe={class:"text-sm bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"},Ee={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Je={class:"flex flex-wrap gap-2"},Ke=["onClick"],Le=z({__name:"Articles",setup(S){const c=N(),u=q(),a=E(),$=f({get:()=>a.searchQuery,set:o=>a.setSearchQuery(o)}),k=f({get:()=>a.selectedCategory,set:o=>a.setCategory(o)}),h=f({get:()=>a.selectedTag,set:o=>a.setTag(o)}),m=f(()=>!!($.value||k.value||h.value)),t=f(()=>{if(c.params.category){const o=a.categories.find(s=>s.id===c.params.category);return o?`${o.name} - 分类文章`:"分类文章"}return c.params.tag?`${c.params.tag} - 标签文章`:"所有文章"}),r=f(()=>{if(c.params.category){const o=a.categories.find(s=>s.id===c.params.category);return(o==null?void 0:o.description)||"浏览该分类下的所有文章"}return c.params.tag?`浏览标签为 "${c.params.tag}" 的所有文章`:"浏览所有技术文章和分享"}),d=o=>{a.setCategory(o),M()},y=o=>{a.setTag(o),M()},w=()=>{a.clearFilters(),u.push("/articles")},v=()=>{a.setTag(null),M()},V=o=>{a.setPage(o),window.scrollTo({top:0,behavior:"smooth"})},M=()=>{k.value?u.push(`/category/${k.value}`):h.value?u.push(`/tag/${h.value}`):u.push("/articles")};return D(()=>c.params,o=>{o.category?a.setCategory(o.category):o.tag?a.setTag(o.tag):a.clearFilters()},{immediate:!0}),Q(()=>{c.params.category?a.setCategory(c.params.category):c.params.tag&&a.setTag(c.params.tag)}),(o,s)=>{const P=I("font-awesome-icon");return l(),i("div",le,[e("section",ie,[e("div",de,[e("div",ge,[e("h1",ce,g(t.value),1),e("p",ye,g(r.value),1)])])]),e("div",ue,[e("div",me,[e("main",pe,[e("div",be,[e("div",xe,[e("div",ke,[e("div",ve,[e("div",fe,[x(P,{icon:"search",class:"h-5 w-5 text-gray-400"})]),F(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>$.value=n),type:"text",placeholder:"搜索文章...",class:"input pl-10"},null,512),[[U,$.value]])])]),e("div",he,[F(e("select",{"onUpdate:modelValue":s[1]||(s[1]=n=>k.value=n),class:"input"},[s[3]||(s[3]=e("option",{value:""},"所有分类",-1)),(l(!0),i(C,null,A(b(a).categories,n=>(l(),i("option",{key:n.id,value:n.id},g(n.name)+" ("+g(n.count)+") ",9,_e))),128))],512),[[R,k.value]])]),m.value?(l(),i("button",{key:0,onClick:w,class:"btn btn-secondary whitespace-nowrap"},[x(P,{icon:"times",class:"mr-2"}),s[4]||(s[4]=p(" 清除筛选 ",-1))])):T("",!0)]),h.value?(l(),i("div",we,[s[5]||(s[5]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400 mr-2"},"当前标签:",-1)),e("span",Pe,[x(P,{icon:"tag",class:"mr-1"}),p(" "+g(h.value)+" ",1),e("button",{onClick:v,class:"ml-2 text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-200"},[x(P,{icon:"times",class:"text-xs"})])])])):T("",!0)]),b(a).paginatedArticles.length>0?(l(),i("div",Ce,[e("div",$e,[e("p",Te,[s[6]||(s[6]=p(" 找到 ",-1)),e("span",Ae,g(b(a).filteredArticles.length),1),s[7]||(s[7]=p(" 篇文章 ",-1)),m.value?(l(),i("span",Me," (已筛选) ")):T("",!0)])]),e("div",Se,[(l(!0),i(C,null,A(b(a).paginatedArticles,n=>(l(),j(K,{key:n.id,article:n,class:"animate-fade-in"},null,8,["article"]))),128))]),b(a).totalPages>1?(l(),j(ne,{key:0,"current-page":b(a).currentPage,"total-pages":b(a).totalPages,onPageChange:V},null,8,["current-page","total-pages"])):T("",!0)])):(l(),i("div",Fe,[e("div",je,[x(P,{icon:"search",class:"text-6xl text-gray-300 dark:text-gray-600 mb-6"}),e("h3",ze,g(m.value?"未找到匹配的文章":"暂无文章"),1),e("p",Ie,g(m.value?"尝试调整搜索条件或清除筛选":"还没有发布任何文章"),1),m.value?(l(),i("button",{key:0,onClick:w,class:"btn btn-primary"}," 清除所有筛选 ")):T("",!0)])]))]),e("aside",Ve,[e("div",Be,[s[9]||(s[9]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," 文章分类 ",-1)),e("div",Ne,[e("button",{onClick:s[2]||(s[2]=n=>d(null)),class:_(["w-full text-left px-3 py-2 rounded-lg transition-colors",k.value?"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700":"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300"])},[e("div",De,[s[8]||(s[8]=e("span",null,"所有分类",-1)),e("span",Qe,g(b(a).articles.length),1)])],2),(l(!0),i(C,null,A(b(a).categories,n=>(l(),i("button",{key:n.id,onClick:B=>d(n.id),class:_(["w-full text-left px-3 py-2 rounded-lg transition-colors",k.value===n.id?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("div",Re,[e("span",null,g(n.name),1),e("span",qe,g(n.count),1)])],10,Ue))),128))])]),e("div",Ee,[s[10]||(s[10]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," 热门标签 ",-1)),e("div",Je,[(l(!0),i(C,null,A(b(a).popularTags,n=>(l(),i("button",{key:n,onClick:B=>y(n),class:_(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium transition-colors",h.value===n?"bg-primary-100 dark:bg-primary-900/20 text-primary-800 dark:text-primary-200":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},[x(P,{icon:"tag",class:"mr-1"}),p(" "+g(n),1)],10,Ke))),128))])])])])])])}}}),Ye=J(Le,[["__scopeId","data-v-fb6272a8"]]);export{Ye as default};
